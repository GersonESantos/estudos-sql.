<body>
    <h1>Gerenciador de Usuários (Xeon Cloud Lab)</h1>

    <div class="card">
        <h3>Novo Cadastro</h3>
        <input type="text" id="nome" placeholder="Nome">
        <input type="email" id="email" placeholder="E-mail">
        <input type="password" id="senha" placeholder="Senha">
        <button onclick="cadastrar()">Cadastrar</button>
    </div>

    <hr>
    <h3>Lista de Usuários</h3>
    <div id="lista">Carregando...</div>

    <script>
        const listaDiv = document.getElementById('lista');

        // FUNÇÃO PARA LER (READ)
        async function buscarUsuarios() {
            const resp = await fetch('http://localhost:3000/usuarios');
            const dados = await resp.json();
            listaDiv.innerHTML = dados.map(u => `
                <div class="card">
                    <strong>${u.Nome}</strong> (${u.Email})
                </div>
            `).join('');
        }

        // FUNÇÃO PARA CRIAR (CREATE)
        async function cadastrar() {
            const dados = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                senha: document.getElementById('senha').value
            };

            await fetch('http://localhost:3000/usuarios', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dados)
            });

            alert('Cadastrado!');
            buscarUsuarios(); // Atualiza a lista automaticamente
        }

        buscarUsuarios();
    </script>
</body>